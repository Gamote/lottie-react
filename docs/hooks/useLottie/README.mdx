---
name: useLottie
menu: Hooks
route: /hooks/useLottie
---

import { Playground } from "docz";
import UseLottieExamples from "./UseLottieExamples";
import UseLottieWithInteractivity from "./UseLottieWithInteractivity";

# useLottie

## Getting Started

<UseLottieExamples />

```jsx
import { useLottie } from "lottie-react";
import groovyWalkAnimation from "./groovyWalk.json";

const style = {
	height: 300,
};

const Example = () => {
	const options = {
		animationData: groovyWalkAnimation,
		loop: true,
		autoplay: true,
	};

	const { View } = useLottie(options, style);

	return View;
};

export default Example;
```

## Params

| Param                  | Type            | Required | Default | Description                                                                                                                                                                                              |
| ---------------------- | --------------- | -------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| options                | Object          | required |         | Subset of the lottie-web options                                                                                                                                                                         |
| options.animationData  | Object          | required |         | A JSON Object with the exported animation data                                                                                                                                                           |
| options.loop           | boolean\|number | optional | true    | Set it to true for infinite amount of loops, or pass a number for a specific amount of loops                                                                                                             |
| options.autoplay       | boolean         | optional | true    | If set to true, animation will play as soon as it's loaded                                                                                                                                               |
| options.initialSegment | array           | optional |         | Expects an array of length 2. First value is the initial frame, second value is the final frame. If this is set, the animation will start at this position in time instead of the exported value from AE |
| style                  | Object          | optional |         | Style object that applies to the animation wrapper (which is a `div`)                                                                                                                                    |

## Returns

| Property                | Type          |
| ----------------------- | ------------- |
| Lottie              | Object        |
| Lottie.View         | React.Element |
| Lottie.play         | method        |
| Lottie.stop         | method        |
| Lottie.pause        | method        |
| Lottie.setSpeed     | method        |
| Lottie.goToAndStop  | method        |
| Lottie.goToAndPlay  | method        |
| Lottie.setDirection | method        |
| Lottie.playSegments | method        |
| Lottie.setSubframe  | method        |
| Lottie.destroy      | method        |
| Lottie.getDuration  | method        |


## Examples

### `Animate on scroll (interactivity)`

<UseLottieWithInteractivity />

```jsx
import React, { useRef, useEffect } from "react";
import { useLottie } from "lottie-react";
import groovyWalkAnimation from "./groovyWalk.json";

const style = {
	height: 300,
};

const options = {
	animationData: groovyWalkAnimation,
	loop: false,
	autoplay: false,
};

// Indicates the actual visual boundaries.
// A value is between 0 and 1 and is the percentage of animation viewport.
const viewport = [0, 1];

function getContainerVisibility(container) {
	// Get the bounding box for the container
	const { top, height } = container.getBoundingClientRect();

	// Calculate current view percentage
	const current = window.innerHeight - top;
	const max = window.innerHeight + height;
	return current / max;
}

const Example = () => {
	const { View, getDuration, goToAndStop } = useLottie(options, style);
	const containerRef = useRef();

	useEffect(() => {
		if (containerRef.current) {
			// get total number of animation frames
			const totalFrames = getDuration(true);
			const container = containerRef.current;

			const scrollHandler = () => {
				// get scroll offset relative to container
				const currentPercent = getContainerVisibility(container);
				const isInView =
					currentPercent >= viewport[0] &&
					currentPercent <= viewport[1];

				if (isInView) {
					goToAndStop(
						Math.ceil(
							((currentPercent - viewport[0]) /
								(viewport[1] - viewport[0])) *
								totalFrames,
						),
						true,
					);
				}
			};

			document.addEventListener("scroll", scrollHandler);

			return () => {
				document.removeEventListener("scroll", scrollHandler);
			};
		}
	}, [goToAndStop, containerRef.current]);

	return <div ref={containerRef}>{View}</div>;
};

export default Example;
```
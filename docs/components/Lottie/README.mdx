---
name: Lottie
menu: Components
route: /components/Lottie
---

import { Playground } from "docz";
import LottieExamples from "./LottieExamples";
import LottieWithInteractivity from "./LottieWithInteractivity";

# Lottie

## Getting Started

<LottieExamples />

```jsx
import Lottie from "lottie-react";
import groovyWalkAnimation from "./groovyWalk.json";

const Example = () => {
	return <Lottie animationData={groovyWalkAnimation} />;
};

export default Example;
```

## Props

### `animationData`
A JSON Object with the exported animation data
```yaml
Type: Object
Default: none
Required: ☑
```

----

### `loop`
Set it to true for infinite amount of loops, or pass a number for a specific amount of loops
```yaml
Type: Boolean | Number
Default: true
Required: ☐
```

----

### `autoplay`
If set to true, animation will play as soon as it's loaded
```yaml
Type: Boolean
Default: true
Required: ☐
```

----

### `initialSegment`
Expects an array of length 2. First value is the initial frame, second value is the final frame. If this is set, the animation will start at this position in time instead of the exported value from AE
```yaml
Type: Array
Default: none
Required: ☐
```

----

### `onComplete`

----

### `onLoopComplete`

----

### `onEnterFrame`

----

### `onSegmentStart`

----

### `onConfigReady`

----

### `onDataReady`

----

### `onDataFailed`

----

### `onLoadedImages`

----

### `onDOMLoaded`

----

### `onDestroy`

----

### `style`
Style object that applies to the animation wrapper (which is a div)
```yaml
Type: Object
Default: none
Required: ☐
```

----

### `ref`
Expects a React ref object in which interaction methods will be stored
```yaml
Type: React.RefObject
Default: none
Required: ☐
```

## Interaction methods
These methods are designed to give you more control over the Lottie animation, and fill in the gaps left by the props:

### `play()`

----

### `stop()`

----

### `pause()`

----

### `setSpeed(speed)`
```yaml
speed: 1 is normal speed
```

----

### `goToAndPlay(value, isFrame)`
```yaml
value: numeric value.
isFrame: defines if first argument is a time based value or a frame based (default false).
```

----

### `goToAndStop(value, isFrame)`
```yaml
value: numeric value.
isFrame: defines if first argument is a time based value or a frame based (default false).
```

----

### `setDirection(direction)`
```yaml
direction: 1 is forward, -1 is reverse.
```

----

### `playSegments(segments, forceFlag)`
```yaml
segments: array. Can contain 2 numeric values that will be used as first and last frame of the animation. Or can contain a sequence of arrays each with 2 numeric values.
forceFlag: boolean. If set to false, it will wait until the current segment is complete. If true, it will update values immediately.
```

----

### `setSubframe(useSubFrames)`
```yaml
useSubFrames: If false, it will respect the original AE fps. If true, it will update on every requestAnimationFrame with intermediate values. Default is true.
```

----

### `destroy()`

----

### `getDuration(inFrames)`
```yaml
inFrames: If true, returns duration in frames, if false, in seconds
```

### Calling the methods
To use the interaction methods listed above, pass a reference object to the Lottie component by using the `ref` prop (see the React documentation to learn more about [Ref](https://reactjs.org/docs/refs-and-the-dom.html) or [useRef](https://reactjs.org/docs/hooks-reference.html#useref) hook):
```jsx
import Lottie from "lottie-react";
import groovyWalkAnimation from "./groovyWalk.json";

const Example = () => {
    const ref = useRef();

	return <Lottie ref={ref} animationData={groovyWalkAnimation} />;
};

export default Example;
```

You can then use the interaction methods like this:
```jsx
...
ref.current.pause();
...
```

## Examples

### `Animate on scroll (interactivity)`

<LottieWithInteractivity />

```jsx
import React, { useRef, useEffect } from "react";
import Lottie from "lottie-react";
import groovyWalkAnimation from "./groovyWalk.json";

const style = {
	height: 300,
	border: 3,
	borderStyle: "solid",
	borderRadius: 7,
};

// Indicates the actual visual boundaries.
// A value is between 0 and 1 and is the percentage of animation viewport.
const viewport = [0, 1];

function getContainerVisibility(container) {
	// Get the bounding box for the container
	const { top, height } = container.getBoundingClientRect();

	// Calculate current view percentage
	const current = window.innerHeight - top;
	const max = window.innerHeight + height;
	return current / max;
}

const Example = () => {
	const containerRef = useRef();
	const lottieRef = useRef();

	useEffect(() => {
		if (containerRef.current && lottieRef.current) {
			const container = containerRef.current;
			const { getDuration, goToAndStop } = lottieRef.current;
			const totalFrames = getDuration(true);

			const scrollHandler = () => {
				const currentPercent = getContainerVisibility(container);

				const isInView =
					currentPercent >= viewport[0] &&
					currentPercent <= viewport[1];

				if (isInView) {
					goToAndStop(
						Math.ceil(
							((currentPercent - viewport[0]) /
								(viewport[1] - viewport[0])) *
								totalFrames,
						),
						true,
					);
				}
			};

			document.addEventListener("scroll", scrollHandler);

			return () => {
				document.removeEventListener("scroll", scrollHandler);
			};
		}

		return () => {};
	}, [containerRef.current, lottieRef.current]);

	return (
		<div ref={containerRef}>
			<Lottie
				ref={lottieRef}
				animationData={groovyWalkAnimation}
				style={style}
				loop={false}
				autoplay={false}
			/>
		</div>
	);
};

export default Example;

```